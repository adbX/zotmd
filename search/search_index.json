{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ZotMD","text":"<p>Sync your Zotero library to Markdown files with automatic updates and PDF annotation extraction.</p> <p>ZotMD is a command-line tool that synchronizes your Zotero library to beautifully formatted Markdown files, perfect for use with Obsidian, Logseq, or any other Markdown-based note-taking app.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Smart Sync: Incremental sync only updates changed items</li> <li>PDF Annotations: Automatically extracts highlights and notes from PDFs</li> <li>Customizable Templates: Use Jinja2 templates to format your notes</li> <li>Citation Keys: Uses Better BibTeX citation keys for consistent filenames</li> <li>User Notes: Preserves your custom notes across syncs</li> <li>Configurable: Simple TOML configuration file</li> <li>Cross-Platform: Works on macOS, Linux, and Windows</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code># Install with uv (recommended)\nuv tool install zotmd\n\n# Or with pipx\npipx install zotmd\n\n# Initialize configuration\nzotmd init\n\n# Sync your library\nzotmd sync\n</code></pre>"},{"location":"#example-output","title":"Example Output","text":"<p>Each Zotero item becomes a Markdown file named after its citation key:</p> <pre><code>---\ntitle: \"The Structure of Scientific Revolutions\"\nauthors: Thomas S. Kuhn\nyear: 1962\nitemType: book\ntags:\n  - philosophy-of-science\n  - paradigm-shifts\ncitationKey: kuhn1962structure\n---\n\n# The Structure of Scientific Revolutions\n\n## Metadata\n\n- **Authors:** Thomas S. Kuhn\n- **Year:** 1962\n- **Publisher:** University of Chicago Press\n- **ISBN:** 978-0226458083\n\n## Abstract\n\nA landmark in intellectual history...\n\n## Annotations\n\n### Page 10 (Yellow)\n\n&gt; \"Normal science means research firmly based upon one or more past scientific achievements...\"\n\nMy note: This is the definition of normal science according to Kuhn.\n\n## Notes\n\n&lt;!-- Add your custom notes below this line --&gt;\n&lt;!-- They will be preserved across syncs --&gt;\n</code></pre>"},{"location":"#prerequisites","title":"Prerequisites","text":"<ol> <li>Better BibTeX: Required for citation keys</li> <li> <p>Install from retorque.re/zotero-better-bibtex</p> </li> <li> <p>Zotero API Access:</p> </li> <li>Enable API access in Zotero Settings \u2192 Advanced \u2192 Miscellaneous</li> <li>Generate an API key at zotero.org/settings/keys</li> </ol>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Installation Guide</li> <li>Getting Started</li> <li>Usage &amp; Commands</li> <li>Configuration Reference</li> </ul>"},{"location":"configuration/","title":"Configuration","text":"<p>ZotMD uses a TOML configuration file stored in your system's config directory.</p>"},{"location":"configuration/#config-file-location","title":"Config File Location","text":"OS Path macOS <code>~/Library/Application Support/zotmd/config.toml</code> Linux <code>~/.config/zotmd/config.toml</code> Windows <code>%APPDATA%\\zotmd\\config.toml</code>"},{"location":"configuration/#configuration-schema","title":"Configuration Schema","text":"<pre><code>[zotero]\nlibrary_id = \"1234567\"\napi_key = \"abc123xyz789...\"\nlibrary_type = \"user\"\n\n[sync]\noutput_dir = \"/Users/yourname/notes/references\"\ndeletion_behavior = \"move\"\n\n[advanced]\ndb_path = \"\"\ntemplate_path = \"\"\n</code></pre>"},{"location":"configuration/#zotero-section","title":"Zotero Section","text":""},{"location":"configuration/#library_id","title":"library_id","text":"<ul> <li>Type: String (numeric)</li> <li>Required: Yes</li> <li>Description: Your Zotero user ID or group ID</li> <li>Find it: zotero.org/settings/keys</li> </ul>"},{"location":"configuration/#api_key","title":"api_key","text":"<ul> <li>Type: String</li> <li>Required: Yes</li> <li>Description: Your Zotero API key</li> <li>Generate: zotero.org/settings/keys/new</li> <li>Permissions needed: Read Only, Allow library access</li> </ul>"},{"location":"configuration/#library_type","title":"library_type","text":"<ul> <li>Type: String</li> <li>Required: Yes</li> <li>Options: <code>\"user\"</code> or <code>\"group\"</code></li> <li>Description:<ul> <li><code>\"user\"</code>: Your personal library</li> <li><code>\"group\"</code>: A shared group library</li> </ul> </li> </ul>"},{"location":"configuration/#sync-section","title":"Sync Section","text":""},{"location":"configuration/#output_dir","title":"output_dir","text":"<ul> <li>Type: String (path)</li> <li>Required: Yes</li> <li>Description: Directory where Markdown files will be saved</li> <li>Examples:<ul> <li><code>/Users/yourname/vault/references</code></li> <li><code>C:\\Users\\YourName\\Documents\\References</code></li> <li><code>~/Dropbox/Notes/Zotero</code></li> </ul> </li> </ul>"},{"location":"configuration/#deletion_behavior","title":"deletion_behavior","text":"<ul> <li>Type: String</li> <li>Required: Yes</li> <li>Options: <code>\"move\"</code> or <code>\"delete\"</code></li> <li>Description:<ul> <li><code>\"move\"</code>: Deleted items moved to <code>removed/</code> subdirectory</li> <li><code>\"delete\"</code>: Deleted items permanently removed from filesystem</li> </ul> </li> </ul> <p>Recommendation: Use <code>\"move\"</code> to prevent accidental data loss.</p>"},{"location":"configuration/#advanced-section","title":"Advanced Section","text":"<p>Both fields are optional. Leave empty (<code>\"\"</code>) to use defaults.</p>"},{"location":"configuration/#db_path","title":"db_path","text":"<ul> <li>Type: String (path)</li> <li>Default: Platform-specific data directory</li> <li>Description: Custom location for sync database</li> <li>Default locations:<ul> <li>macOS: <code>~/Library/Application Support/zotmd/sync.sqlite</code></li> <li>Linux: <code>~/.local/share/zotmd/sync.sqlite</code></li> <li>Windows: <code>%LOCALAPPDATA%\\zotmd\\sync.sqlite</code></li> </ul> </li> </ul>"},{"location":"configuration/#template_path","title":"template_path","text":"<ul> <li>Type: String (path)</li> <li>Default: Built-in template</li> <li>Description: Path to custom Jinja2 template file</li> <li>See: Template Customization below</li> </ul>"},{"location":"configuration/#example-configurations","title":"Example Configurations","text":""},{"location":"configuration/#minimal-recommended-for-most-users","title":"Minimal (recommended for most users)","text":"<pre><code>[zotero]\nlibrary_id = \"1234567\"\napi_key = \"abc123xyz789...\"\nlibrary_type = \"user\"\n\n[sync]\noutput_dir = \"/Users/me/vault/references\"\ndeletion_behavior = \"move\"\n\n[advanced]\ndb_path = \"\"\ntemplate_path = \"\"\n</code></pre>"},{"location":"configuration/#group-library","title":"Group Library","text":"<pre><code>[zotero]\nlibrary_id = \"9876543\"\napi_key = \"def456uvw...\"\nlibrary_type = \"group\"  # Changed to group\n\n[sync]\noutput_dir = \"/Users/me/shared-refs\"\ndeletion_behavior = \"move\"\n\n[advanced]\ndb_path = \"\"\ntemplate_path = \"\"\n</code></pre>"},{"location":"configuration/#custom-locations","title":"Custom Locations","text":"<pre><code>[zotero]\nlibrary_id = \"1234567\"\napi_key = \"abc123xyz...\"\nlibrary_type = \"user\"\n\n[sync]\noutput_dir = \"/custom/output/path\"\ndeletion_behavior = \"delete\"  # Permanent deletion\n\n[advanced]\ndb_path = \"/custom/db/location/sync.sqlite\"\ntemplate_path = \"/custom/templates/my-template.md.j2\"\n</code></pre>"},{"location":"configuration/#template-customization","title":"Template Customization","text":"<p>ZotMD uses Jinja2 templates to generate Markdown files.</p>"},{"location":"configuration/#using-a-custom-template","title":"Using a Custom Template","text":"<ol> <li> <p>Copy the default template:    <pre><code># Find built-in template location\npython -c \"import zotmd; print(zotmd.__file__)\"\n# Built-in is at: .../zotmd/templates/default.md.j2\n</code></pre></p> </li> <li> <p>Create your custom template:    <pre><code>cp /path/to/default.md.j2 ~/my-custom-template.md.j2\n</code></pre></p> </li> <li> <p>Edit <code>config.toml</code>:    <pre><code>[advanced]\ntemplate_path = \"/Users/me/my-custom-template.md.j2\"\n</code></pre></p> </li> <li> <p>Re-sync with new template:    <pre><code>zotmd sync --full\n</code></pre></p> </li> </ol>"},{"location":"configuration/#available-template-variables","title":"Available Template Variables","text":"Variable Type Description <code>item.title</code> str Item title <code>item.authors</code> list Author names <code>item.year</code> str Publication year <code>item.item_type</code> str Zotero item type <code>item.tags</code> list Tag strings <code>item.citation_key</code> str Better BibTeX citation key <code>item.abstract</code> str Abstract text <code>item.doi</code> str DOI <code>item.url</code> str URL <code>item.publication_title</code> str Journal/book title <code>annotations</code> list PDF annotations <code>last_import</code> str Timestamp of sync"},{"location":"configuration/#template-example","title":"Template Example","text":"<pre><code>---\ntitle: \"{{ item.title }}\"\nauthors: {% for creator in item.creators %}{{ creator.lastName }}{% if not loop.last %}, {% endif %}{% endfor %}\nyear: {{ item.date[:4] if item.date else '' }}\ntags: {% for tag in item.tags %}- {{ tag }}\n{% endfor %}\ncitationKey: {{ item.citation_key }}\n---\n\n# {{ item.title }}\n\n{% if item.abstract %}\n## Abstract\n{{ item.abstract }}\n{% endif %}\n\n{% if annotations %}\n## Annotations\n{% for annot in annotations %}\n### Page {{ annot.page_label }} ({{ annot.color_category }})\n{% if annot.text %}\n&gt; {{ annot.text }}\n{% endif %}\n{% if annot.comment %}\n{{ annot.comment }}\n{% endif %}\n{% endfor %}\n{% endif %}\n\n## Notes\n&lt;!-- Add your notes below --&gt;\n</code></pre>"},{"location":"configuration/#editing-configuration","title":"Editing Configuration","text":""},{"location":"configuration/#option-1-use-zotmd-init-recommended","title":"Option 1: Use zotmd init (recommended)","text":"<pre><code>zotmd init\n</code></pre> <p>Interactive prompts with current values shown.</p>"},{"location":"configuration/#option-2-edit-file-directly","title":"Option 2: Edit file directly","text":"<pre><code># macOS\nopen ~/.config/zotmd/config.toml\n\n# Linux\nnano ~/.config/zotmd/config.toml\n\n# Windows\nnotepad %APPDATA%\\zotmd\\config.toml\n</code></pre> <p>After editing, verify with: <pre><code>zotmd status\n</code></pre></p>"},{"location":"configuration/#troubleshooting-config-issues","title":"Troubleshooting Config Issues","text":""},{"location":"configuration/#config-not-found","title":"Config not found","text":"<pre><code>$ zotmd sync\nError: Configuration not found. Run 'zotmd init' first.\n</code></pre> <p>Solution: Run <code>zotmd init</code> to create config file.</p>"},{"location":"configuration/#invalid-api-key","title":"Invalid API key","text":"<pre><code>$ zotmd init\nTesting connection...\n\u2717 Error: Invalid API key\n</code></pre> <p>Solutions: - Regenerate API key at zotero.org/settings/keys/new - Ensure \"Allow library access\" is checked - Check for typos (keys are case-sensitive)</p>"},{"location":"configuration/#invalid-library-id","title":"Invalid library ID","text":"<pre><code>\u2717 Error: Library not found (403 Forbidden)\n</code></pre> <p>Solutions: - Verify library ID at zotero.org/settings/keys - Ensure library_type matches (user vs group) - For groups, ensure you're a member</p>"},{"location":"configuration/#permission-denied-output-directory","title":"Permission denied (output directory)","text":"<pre><code>Error: Permission denied: /restricted/path\n</code></pre> <p>Solutions: - Choose a directory you have write access to - Create directory first: <code>mkdir -p ~/notes/references</code> - Check permissions: <code>ls -ld ~/notes/references</code></p>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide walks you through setting up ZotMD for the first time.</p>"},{"location":"getting-started/#step-1-install-better-bibtex","title":"Step 1: Install Better BibTeX","text":"<p>Better BibTeX is a Zotero plugin that generates citation keys for your library items.</p> <ol> <li>Download from retorque.re/zotero-better-bibtex</li> <li>In Zotero: Tools \u2192 Add-ons \u2192 Install Add-on From File</li> <li>Select the downloaded <code>.xpi</code> file</li> <li>Restart Zotero</li> </ol> <p>Verify: Right-click any item \u2192 Better BibTeX \u2192 Refresh BibTeX key</p>"},{"location":"getting-started/#step-2-enable-zotero-api-access","title":"Step 2: Enable Zotero API Access","text":"<ol> <li>Open Zotero Settings \u2192 Advanced \u2192 Miscellaneous</li> <li>Check \"Allow other applications to access Zotero\"</li> <li>Click OK</li> </ol>"},{"location":"getting-started/#step-3-get-your-credentials","title":"Step 3: Get Your Credentials","text":""},{"location":"getting-started/#library-id","title":"Library ID","text":"<ol> <li>Go to zotero.org/settings/keys</li> <li>Find \"Your userID for use in API calls\"</li> <li>Copy the number (e.g., <code>1234567</code>)</li> </ol>"},{"location":"getting-started/#api-key","title":"API Key","text":"<ol> <li>Go to zotero.org/settings/keys/new</li> <li>Enter a description (e.g., \"ZotMD Sync\")</li> <li>Under Personal Library, check:</li> <li>\u2713 Allow library access</li> <li>\u2713 Read Only</li> <li>Click Save Key</li> <li>Copy the generated key (you won't see it again!)</li> </ol>"},{"location":"getting-started/#step-4-initialize-configuration","title":"Step 4: Initialize Configuration","text":"<p>Run the interactive setup:</p> <pre><code>zotmd init\n</code></pre> <p>You'll be prompted for:</p> <pre><code>Zotero MD Sync - Configuration\n==============================\n\nLibrary ID []: 1234567\nAPI Key []: abc123xyz789...\nLibrary Type (user/group) [user]:\nOutput Directory []: /Users/yourname/notes/references\nDeletion Behavior (move/delete) [move]:\nDatabase Path (Enter for default) [~/.local/share/zotmd/sync.sqlite]:\n\nTesting connection...\n\u2713 Connected to Zotero library (version 4652)\n\nConfiguration saved to ~/.config/zotmd/config.toml\n</code></pre>"},{"location":"getting-started/#configuration-options","title":"Configuration Options","text":"<ul> <li>Library ID: Your numeric user ID from Zotero</li> <li>API Key: The key you generated above</li> <li>Library Type: <code>user</code> (personal library) or <code>group</code> (shared library)</li> <li>Output Directory: Where to save Markdown files</li> <li>Deletion Behavior:<ul> <li><code>move</code>: Deleted items moved to <code>removed/</code> subdirectory</li> <li><code>delete</code>: Deleted items permanently removed</li> </ul> </li> <li>Database Path: Leave blank for default location</li> </ul>"},{"location":"getting-started/#step-5-run-your-first-sync","title":"Step 5: Run Your First Sync","text":"<pre><code>zotmd sync --full\n</code></pre> <p>This performs a full sync of your entire library. You'll see:</p> <pre><code>Syncing Zotero library...\nProcessing: 243 items |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 100%\n\u2713 Synced 243 items (15 new, 228 updated)\n\u2713 Extracted 89 annotations\n\u2713 Completed in 45s\n</code></pre> <p>Your Markdown files are now in your configured output directory!</p>"},{"location":"getting-started/#step-6-verify-the-results","title":"Step 6: Verify the Results","text":"<p>Check your output directory:</p> <pre><code>ls ~/notes/references\n</code></pre> <p>You should see files named after their citation keys:</p> <pre><code>smith2020introduction.md\njones2019methodology.md\nwilson2021analysis.md\n...\n</code></pre>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Commands for daily use</li> <li>Customize your Configuration</li> <li>See Troubleshooting if you encounter issues</li> </ul>"},{"location":"getting-started/#updating-existing-config","title":"Updating Existing Config","text":"<p>To change your configuration later, simply run <code>zotmd init</code> again. Press Enter to keep existing values, or type a new value to update.</p> <pre><code>zotmd init\n</code></pre> <pre><code>Library ID [1234567]:  # Press Enter to keep\nAPI Key [abc...xyz]:   # Press Enter to keep\nOutput Directory [/old/path]: /new/path  # Type new value\n</code></pre>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#recommended-uv","title":"Recommended: uv","text":"<p>uv is the fastest and most modern Python package installer.</p> <pre><code># Install as a tool (isolated environment)\nuv tool install zotmd\n\n# Upgrade to latest version\nuv tool upgrade zotmd\n\n# Uninstall\nuv tool uninstall zotmd\n</code></pre>"},{"location":"installation/#alternative-pipx","title":"Alternative: pipx","text":"<p>pipx installs Python applications in isolated environments.</p> <pre><code># Install\npipx install zotmd\n\n# Upgrade\npipx upgrade zotmd\n\n# Uninstall\npipx uninstall zotmd\n</code></pre>"},{"location":"installation/#alternative-pip","title":"Alternative: pip","text":"<p>You can also install with pip, but we recommend using <code>uv</code> or <code>pipx</code> for better isolation.</p> <pre><code># Install globally (not recommended)\npip install zotmd\n\n# Install in a virtual environment\npython -m venv .venv\nsource .venv/bin/activate  # On Windows: .venv\\Scripts\\activate\npip install zotmd\n</code></pre>"},{"location":"installation/#verify-installation","title":"Verify Installation","text":"<p>After installation, verify that <code>zotmd</code> is available:</p> <pre><code>zotmd --help\n</code></pre> <p>You should see the help message with available commands.</p>"},{"location":"installation/#requirements","title":"Requirements","text":"<ul> <li>Python: 3.13 or later</li> <li>Better BibTeX: Zotero plugin (required)</li> <li>Zotero API Access: Enabled in Zotero settings</li> </ul>"},{"location":"installation/#next-steps","title":"Next Steps","text":"<p>Continue to Getting Started to set up your configuration.</p>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and solutions for ZotMD.</p>"},{"location":"troubleshooting/#installation-issues","title":"Installation Issues","text":""},{"location":"troubleshooting/#command-not-found-zotmd","title":"Command not found: zotmd","text":"<p>Problem: <pre><code>$ zotmd --help\nzotmd: command not found\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>If installed with uv: <pre><code># Ensure uv's bin directory is in PATH\necho 'export PATH=\"$HOME/.local/bin:$PATH\"' &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n\n# Verify installation\nuv tool list\n</code></pre></p> </li> <li> <p>If installed with pipx: <pre><code># Ensure pipx path\npipx ensurepath\nsource ~/.zshrc\n</code></pre></p> </li> <li> <p>Reinstall: <pre><code>uv tool install --force zotmd\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#python-version-too-old","title":"Python version too old","text":"<p>Problem: <pre><code>ERROR: Package requires Python &gt;=3.13\n</code></pre></p> <p>Solution: <pre><code># Install Python 3.13+ with uv\nuv python install 3.13\n\n# Or use system package manager\n# macOS:\nbrew install python@3.13\n\n# Linux:\nsudo apt install python3.13\n</code></pre></p>"},{"location":"troubleshooting/#connection-issues","title":"Connection Issues","text":""},{"location":"troubleshooting/#cannot-connect-to-zotero","title":"Cannot connect to Zotero","text":"<p>Problem: <pre><code>$ zotmd status\n\u2717 Error: Connection refused\n</code></pre></p> <p>Solutions:</p> <ol> <li>Enable API access:</li> <li>Zotero \u2192 Settings \u2192 Advanced \u2192 Miscellaneous</li> <li> <p>Check \"Allow other applications to access Zotero\"</p> </li> <li> <p>Verify credentials: <pre><code>zotmd init  # Re-enter credentials\n</code></pre></p> </li> <li> <p>Test API manually: <pre><code>curl \"https://api.zotero.org/users/YOUR_ID/items?limit=1&amp;key=YOUR_KEY\"\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#403-forbidden-error","title":"403 Forbidden Error","text":"<p>Problem: <pre><code>\u2717 Error: 403 Forbidden\n</code></pre></p> <p>Causes &amp; Solutions:</p> <ol> <li>Wrong library_type:</li> <li>Personal library: Use <code>library_type = \"user\"</code></li> <li> <p>Group library: Use <code>library_type = \"group\"</code></p> </li> <li> <p>Invalid API key:</p> </li> <li>Regenerate at zotero.org/settings/keys/new</li> <li> <p>Ensure \"Allow library access\" is checked</p> </li> <li> <p>Wrong library ID:</p> </li> <li>Verify at zotero.org/settings/keys</li> <li>For groups: Use group ID, not user ID</li> </ol>"},{"location":"troubleshooting/#rate-limiting","title":"Rate Limiting","text":"<p>Problem: <pre><code>\u2717 Error: 429 Too Many Requests\n</code></pre></p> <p>Solution: Wait a few minutes before retrying. Zotero API has rate limits: - Personal tier: 120 requests/minute - Group tier: Shared across all members</p>"},{"location":"troubleshooting/#sync-issues","title":"Sync Issues","text":""},{"location":"troubleshooting/#items-missing-citation-keys","title":"Items missing citation keys","text":"<p>Problem: <pre><code>Skipped 45 items without citation keys\n</code></pre></p> <p>Solution:</p> <ol> <li>Install Better BibTeX:</li> <li>Download: retorque.re/zotero-better-bibtex</li> <li> <p>Zotero \u2192 Tools \u2192 Add-ons \u2192 Install from File</p> </li> <li> <p>Generate citation keys:</p> </li> <li>Select all items in Zotero</li> <li> <p>Right-click \u2192 Better BibTeX \u2192 Refresh BibTeX key</p> </li> <li> <p>Re-sync: <pre><code>zotmd sync\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#annotations-not-appearing","title":"Annotations not appearing","text":"<p>Problem: PDF highlights not showing in Markdown files.</p> <p>Solutions:</p> <ol> <li>Ensure PDF is in Zotero:</li> <li>Attachment must be stored in Zotero (not linked file)</li> <li> <p>Check: Item has PDF icon, not link icon</p> </li> <li> <p>Annotations must be created in Zotero:</p> </li> <li>Use Zotero's built-in PDF reader</li> <li> <p>External annotations (Adobe, Preview) won't sync</p> </li> <li> <p>Force re-sync: <pre><code>zotmd sync --full\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#deleted-items-reappearing","title":"Deleted items reappearing","text":"<p>Problem: Deleted Markdown files come back after sync.</p> <p>Cause: Items still exist in Zotero library.</p> <p>Solution:</p> <ol> <li>Delete from Zotero first:</li> <li>Delete item in Zotero</li> <li>Empty Zotero trash</li> <li> <p>Run <code>zotmd sync</code></p> </li> <li> <p>Or remove from filesystem only:</p> </li> <li>Set <code>deletion_behavior = \"delete\"</code> in config</li> <li>Files won't be recreated if deleted locally</li> </ol>"},{"location":"troubleshooting/#user-notes-being-overwritten","title":"User notes being overwritten","text":"<p>Problem: Custom notes in Markdown files are lost after sync.</p> <p>Solution:</p> <p>Place notes in the designated section:</p> <pre><code>## Notes\n&lt;!-- Add your notes below this line --&gt;\n&lt;!-- They will be preserved across syncs --&gt;\n\nYour custom notes here...\n</code></pre> <p>Content above this section will be regenerated on each sync.</p>"},{"location":"troubleshooting/#database-issues","title":"Database Issues","text":""},{"location":"troubleshooting/#corrupted-database","title":"Corrupted database","text":"<p>Problem: <pre><code>Error: database disk image is malformed\n</code></pre></p> <p>Solution:</p> <ol> <li> <p>Backup current database: <pre><code># macOS\ncp ~/.local/share/zotmd/sync.sqlite ~/sync.sqlite.backup\n\n# Linux\ncp ~/.local/share/zotmd/sync.sqlite ~/sync.sqlite.backup\n</code></pre></p> </li> <li> <p>Delete and re-sync: <pre><code>rm ~/.local/share/zotmd/sync.sqlite\nzotmd sync --full\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#database-locked","title":"Database locked","text":"<p>Problem: <pre><code>Error: database is locked\n</code></pre></p> <p>Solution:</p> <ol> <li> <p>Check for other zotmd processes: <pre><code>ps aux | grep zotmd\nkill &lt;PID&gt;  # If found\n</code></pre></p> </li> <li> <p>Remove lock file: <pre><code>rm ~/.local/share/zotmd/sync.sqlite-journal\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#file-system-issues","title":"File System Issues","text":""},{"location":"troubleshooting/#permission-denied","title":"Permission denied","text":"<p>Problem: <pre><code>Error: Permission denied: /path/to/output\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Create directory: <pre><code>mkdir -p ~/notes/references\n</code></pre></p> </li> <li> <p>Fix permissions: <pre><code>chmod 755 ~/notes/references\n</code></pre></p> </li> <li> <p>Choose different path: <pre><code>zotmd init  # Enter accessible directory\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#filename-too-long","title":"Filename too long","text":"<p>Problem: <pre><code>OSError: File name too long\n</code></pre></p> <p>Cause: Citation keys longer than filesystem limit (255 chars).</p> <p>Solution:</p> <ol> <li>Shorten citation key in Better BibTeX:</li> <li>Right-click item \u2192 Better BibTeX \u2192 Pin/Set citation key</li> <li> <p>Enter shorter key</p> </li> <li> <p>Change citation key pattern:</p> </li> <li>Zotero Settings \u2192 Better BibTeX \u2192 Citation Keys</li> <li>Use shorter pattern (e.g., <code>[auth:lower][year]</code>)</li> </ol>"},{"location":"troubleshooting/#special-characters-in-filenames","title":"Special characters in filenames","text":"<p>Problem: Files with invalid characters (<code>/</code>, <code>:</code>, <code>*</code>, etc.)</p> <p>Solution:</p> <p>ZotMD automatically sanitizes filenames, but if issues persist:</p> <ol> <li>Check citation key:</li> <li>Avoid: <code>&lt; &gt; : \" / \\ | ? *</code></li> <li> <p>Better BibTeX usually handles this</p> </li> <li> <p>Manually fix:</p> </li> <li>Edit citation key in Zotero</li> <li>Remove problematic characters</li> </ol>"},{"location":"troubleshooting/#template-issues","title":"Template Issues","text":""},{"location":"troubleshooting/#template-not-found","title":"Template not found","text":"<p>Problem: <pre><code>Error: Template file not found: /path/to/template.md.j2\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Verify path: <pre><code>ls -l /path/to/template.md.j2\n</code></pre></p> </li> <li> <p>Use absolute path in config: <pre><code>template_path = \"/Users/me/templates/custom.md.j2\"\n</code></pre></p> </li> <li> <p>Reset to default: <pre><code>template_path = \"\"  # Empty uses built-in\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#template-syntax-error","title":"Template syntax error","text":"<p>Problem: <pre><code>jinja2.exceptions.TemplateSyntaxError: unexpected '}'\n</code></pre></p> <p>Solution:</p> <ol> <li>Validate Jinja2 syntax:</li> <li>Check matching <code>{% ... %}</code>, <code>{{ ... }}</code></li> <li> <p>Ensure proper indentation</p> </li> <li> <p>Test with default template: <pre><code>template_path = \"\"\n</code></pre> <pre><code>zotmd sync --full\n</code></pre></p> </li> <li> <p>Debug template: <pre><code>zotmd sync --verbose\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#performance-issues","title":"Performance Issues","text":""},{"location":"troubleshooting/#sync-is-very-slow","title":"Sync is very slow","text":"<p>Problem: Full sync takes hours for large library.</p> <p>Solutions:</p> <ol> <li> <p>Use incremental sync: <pre><code>zotmd sync  # Default, not --full\n</code></pre></p> </li> <li> <p>Check network:</p> </li> <li>Zotero API may be slow</li> <li> <p>Try at different time</p> </li> <li> <p>Reduce annotation processing:</p> </li> <li>Large PDFs with many annotations take time</li> <li>This is expected behavior</li> </ol>"},{"location":"troubleshooting/#high-memory-usage","title":"High memory usage","text":"<p>Problem: Process using excessive RAM.</p> <p>Cause: Large library with many annotations.</p> <p>Mitigation:</p> <ol> <li>Process in batches (not yet supported - feature request)</li> <li>Close other applications</li> <li>Increase system swap space</li> </ol>"},{"location":"troubleshooting/#getting-help","title":"Getting Help","text":"<p>If you encounter an issue not listed here:</p> <ol> <li> <p>Check existing issues: github.com/adhithyabhaskar/zotmd/issues</p> </li> <li> <p>Run with verbose logging: <pre><code>zotmd sync --verbose 2&gt;&amp;1 | tee debug.log\n</code></pre></p> </li> <li> <p>Create new issue with:</p> </li> <li>Error message</li> <li>Steps to reproduce</li> <li><code>debug.log</code> output</li> <li>OS and Python version</li> <li><code>zotmd status</code> output</li> </ol>"},{"location":"troubleshooting/#useful-diagnostic-commands","title":"Useful Diagnostic Commands","text":"<pre><code># Check config\nzotmd status\n\n# Test connection only\nzotmd init  # Will test during setup\n\n# View config file\ncat ~/.config/zotmd/config.toml  # macOS/Linux\n\n# Check database\nsqlite3 ~/.local/share/zotmd/sync.sqlite \"SELECT COUNT(*) FROM sync_items;\"\n\n# List installed version\nuv tool list | grep zotmd\n</code></pre>"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#commands-overview","title":"Commands Overview","text":"<p>ZotMD provides three main commands:</p> Command Purpose <code>zotmd init</code> Initialize or update configuration <code>zotmd sync</code> Synchronize your library <code>zotmd status</code> Show configuration and sync status"},{"location":"usage/#zotmd-init","title":"zotmd init","text":"<p>Interactive configuration setup. Updates existing config if already initialized.</p> <pre><code>zotmd init\n</code></pre> <p>Options: - None (fully interactive)</p> <p>When to use: - First-time setup - Changing output directory - Updating API credentials - Switching deletion behavior</p> <p>Example: <pre><code>$ zotmd init\nLibrary ID [1234567]:\nAPI Key [abc...xyz]:\nLibrary Type [user]:\nOutput Directory [/old/path]: /Users/me/vault/references\nDeletion Behavior [move]: delete\nDatabase Path [~/.local/share/zotmd/sync.sqlite]:\n\nTesting connection...\n\u2713 Connected to Zotero library (version 4652)\nConfiguration saved!\n</code></pre></p>"},{"location":"usage/#zotmd-sync","title":"zotmd sync","text":"<p>Synchronize your Zotero library to Markdown files.</p> <pre><code>zotmd sync [OPTIONS]\n</code></pre> <p>Options:</p> Flag Description <code>--full</code> Force full re-sync of all items (slow) <code>--no-progress</code> Disable progress bar <code>-v, --verbose</code> Show detailed logging"},{"location":"usage/#sync-behavior","title":"Sync Behavior","text":"<p>Default (Incremental Sync): - Only processes changed items since last sync - Fast (seconds to minutes) - Detects:     - New items     - Modified metadata     - New/changed annotations     - Deleted items</p> <p>Full Sync (<code>--full</code>): - Re-processes entire library - Slow (minutes to hours for large libraries) - Use when:     - First sync     - Template changed     - Database corrupted     - Manual verification needed</p>"},{"location":"usage/#examples","title":"Examples","text":"<pre><code># Regular incremental sync (recommended)\nzotmd sync\n\n# Force full resync\nzotmd sync --full\n\n# Sync without progress bar (good for scripts/cron)\nzotmd sync --no-progress\n\n# Verbose output for debugging\nzotmd sync --verbose\n</code></pre>"},{"location":"usage/#what-gets-synced","title":"What Gets Synced","text":"<p>For each Zotero item with a citation key:</p> <ol> <li>Metadata: Title, authors, year, tags, DOI, etc.</li> <li>PDF Annotations: Highlights, notes, and comments</li> <li>User Notes: Preserved in <code>%% begin notes %%</code> section</li> <li>Frontmatter: YAML metadata for Obsidian</li> </ol> <p>Skipped items: - Items without Better BibTeX citation keys - Attachments (PDFs are linked, not copied) - Notes (unless they're annotations)</p>"},{"location":"usage/#deleted-items","title":"Deleted Items","text":"<p>When an item is deleted from Zotero:</p> <ul> <li><code>deletion_behavior: move</code>: File moved to <code>removed/</code> subdirectory</li> <li><code>deletion_behavior: delete</code>: File permanently deleted</li> </ul>"},{"location":"usage/#zotmd-status","title":"zotmd status","text":"<p>Show configuration and sync statistics.</p> <pre><code>zotmd status\n</code></pre> <p>Output: <pre><code>ZotMD Configuration\n===================\n\nConfig File: /Users/me/.config/zotmd/config.toml\nDatabase: /Users/me/.local/share/zotmd/sync.sqlite\nOutput Dir: /Users/me/vault/references\n\nZotero Connection\n-----------------\n\u2713 Connected to library 1234567 (version 4652)\n\nSync Statistics\n---------------\nLast Full Sync: 2025-12-20 14:30\nLast Incremental Sync: 2025-12-26 09:15\nTotal Items Synced: 243\nTotal Annotations: 89\nItems Removed: 5\n</code></pre></p> <p>When to use: - Verify configuration - Check connection status - View sync history - Troubleshoot issues</p>"},{"location":"usage/#common-workflows","title":"Common Workflows","text":""},{"location":"usage/#daily-sync","title":"Daily Sync","text":"<p>After adding/updating items in Zotero:</p> <pre><code>zotmd sync\n</code></pre> <p>Takes seconds to minutes, depending on changes.</p>"},{"location":"usage/#template-customization","title":"Template Customization","text":"<p>After modifying your template:</p> <pre><code>zotmd sync --full\n</code></pre> <p>Regenerates all files with new template.</p>"},{"location":"usage/#scheduled-sync-macos","title":"Scheduled Sync (macOS)","text":"<p>Create a LaunchAgent to sync automatically:</p> <pre><code>&lt;!-- ~/Library/LaunchAgents/com.zotmd.sync.plist --&gt;\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n    &lt;key&gt;Label&lt;/key&gt;\n    &lt;string&gt;com.zotmd.sync&lt;/string&gt;\n    &lt;key&gt;ProgramArguments&lt;/key&gt;\n    &lt;array&gt;\n        &lt;string&gt;/usr/local/bin/zotmd&lt;/string&gt;\n        &lt;string&gt;sync&lt;/string&gt;\n        &lt;string&gt;--no-progress&lt;/string&gt;\n    &lt;/array&gt;\n    &lt;key&gt;StartInterval&lt;/key&gt;\n    &lt;integer&gt;3600&lt;/integer&gt; &lt;!-- Every hour --&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre> <p>Load with: <pre><code>launchctl load ~/Library/LaunchAgents/com.zotmd.sync.plist\n</code></pre></p>"},{"location":"usage/#scheduled-sync-linuxcron","title":"Scheduled Sync (Linux/cron)","text":"<p>Edit crontab: <pre><code>crontab -e\n</code></pre></p> <p>Add line: <pre><code>0 * * * * /home/user/.local/bin/zotmd sync --no-progress\n</code></pre></p> <p>Syncs every hour.</p>"},{"location":"usage/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Success 1 General error 2 Configuration error 3 Zotero connection error <p>Useful for scripts: <pre><code>if zotmd sync --no-progress; then\n    echo \"Sync successful\"\nelse\n    echo \"Sync failed with code $?\"\nfi\n</code></pre></p>"}]}